---
description: 
globs: 
alwaysApply: false
---
# Project: PortfolioTracker

## Goal
Generate a medium-sized Java project called `PortfolioTracker`. This application tracks a user's financial portfolio (stocks, crypto, ETFs), simulates buy/sell transactions, computes portfolio value over time, and exports reports. It should be cleanly modularized with OOP design and unit tested.

---

## Requirements

### ğŸ—‚ Project Structure
Create a Mavenâ€‘style layout:

```

src/
â”œâ”€â”€ main/
â”‚   â””â”€â”€ java/
â”‚       â””â”€â”€ com/finance/portfolio/
â”‚           â”œâ”€â”€ Main.java
â”‚           â”œâ”€â”€ model/
â”‚           â”‚   â”œâ”€â”€ Asset.java
â”‚           â”‚   â”œâ”€â”€ Stock.java
â”‚           â”‚   â”œâ”€â”€ Crypto.java
â”‚           â”‚   â”œâ”€â”€ Transaction.java
â”‚           â”‚   â””â”€â”€ Portfolio.java
â”‚           â”œâ”€â”€ service/
â”‚           â”‚   â”œâ”€â”€ PortfolioService.java
â”‚           â”‚   â””â”€â”€ TradeExecutor.java
â”‚           â””â”€â”€ util/
â”‚               â”œâ”€â”€ PriceFetcher.java
â”‚               â””â”€â”€ CSVExporter.java
â””â”€â”€ test/
â””â”€â”€ java/
â””â”€â”€ com/finance/portfolio/
â””â”€â”€ PortfolioServiceTest.java

```

---

### ğŸ“¦ Classes & Responsibilities

#### `Asset.java` (abstract)
- Fields: `symbol`, `name`, `quantity`, `averagePrice`
- Constructor to initialize symbol & name
- Abstract `double getCurrentPrice()`
- Concrete `double getMarketValue()`

#### `Stock.java` / `Crypto.java`
- Extend `Asset`
- Implement `getCurrentPrice()` using a mock or `PriceFetcher`

#### `Transaction.java`
- Fields: `Asset asset`, `int quantity`, `double price`, `LocalDateTime timestamp`, `Type { BUY, SELL }`

#### `Portfolio.java`
- Stores `List<Transaction>` and `Map<String, Asset>`
- Methods: `addTransaction()`, `updateHoldings()`, `getAssets()`, `getTransactions()`

#### `PortfolioService.java`
- Methods: `buyAsset()`, `sellAsset()`, `calculateTotalValue()`
- Delegates to `Portfolio` for updates

#### `TradeExecutor.java`
- Simulates random buy/sell at intervals (for demo/testing)

#### `PriceFetcher.java`
- Mock service returning pseudoâ€‘random current prices per symbol

#### `CSVExporter.java`
- Exports portfolio and/or transactions to `.csv` files

---

### âš™ï¸ Main & Usage

#### `Main.java`
- Demo flow:
  - Instantiate `Portfolio`
  - Create `PortfolioService`
  - Execute some buys/sells
  - Print portfolio value
  - Export CSV via `CSVExporter`
- Use plain output to consoleâ€”no frameworks

---

### ğŸ§ª Testing with JUnit 5

#### `PortfolioServiceTest.java`
- Test cases:
  - Buying increases asset quantity and average price
  - Selling decreases quantity and handles errors
  - `calculateTotalValue()` reflects current mocked prices
- Use assertions to verify state and values

---

### ğŸ“ Constraints
- Java 17
- No external dependencies except JUnit 5
- SOLID principles, clean naming, clear packaging
- Each class in its own `.java` file with correct `package` declarations

---

## âœ… Output Format

Cursor should generate:
- Full directory structure
- All `.java` files with code and imports
- JUnit test class
- A basic `pom.xml` or `build.gradle` scaffold (optional)
